version: '2' # specify docker-compose version

# Define the services/containers to be run
services:
  angularjs: # name of the first service
    container_name: angularjs
    build:
      context: . # specify the directory of the Dockerfile
      dockerfile: ./.docker/docker-angularjs.dockerfile
    ports:
      - "3000:3000" # specify port forewarding
    volumes:
      - ./blur-admin/src:/app/src
    networks:
      - nectarApp-network

  node: #name of the second service
    container_name: node
    build:
      context: . # specify the directory of the Dockerfile
      dockerfile: ./.docker/docker-node.dockerfile
    volumes:
      - ./crypto-exchange-api/:/app/
    env_file:
      - ./.docker/env/node.${APP_ENV}.env
    ports:
      - "9000:9000" #specify ports forewarding
    networks:
      - nectarApp-network

  mongodb:
    container_name: mongodb
    image: mongo
    volumes:
      - "./data:/data/db"
    ports:
      - "27017:27017"
    env_file:
      - ./.docker/env/mongo.${APP_ENV}.env
    networks:
      - nectarApp-network

networks:
  nectarApp-network:
    driver: bridge